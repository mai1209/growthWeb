{"ast":null,"code":"var _s = $RefreshSig$();\n// LeftSite.js (CORREGIDO Y COMPLETO)\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport style from '../style/LeftSite.module.css';\n\n// 1. Ahora recibe 'token' y 'refreshKey' para poder buscar sus datos\nfunction LeftSite({\n  token,\n  refreshKey\n}) {\n  _s();\n  const [isOpen, setIsOpen] = useState(true);\n  const [movimientos, setMovimientos] = useState([]); // Vuelve a tener su propio estado\n  const [totales, setTotales] = useState({\n    ingreso: 0,\n    egreso: 0,\n    total: 0\n  });\n  const toggleContainer = () => setIsOpen(!isOpen);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000';\n\n  // 2. Vuelve a tener su propio useEffect para buscar datos\n  useEffect(() => {\n    const fetchMovimientos = async () => {\n      if (!token) {\n        setMovimientos([]);\n        return;\n      }\n      try {\n        const res = await axios.get(`${API_URL}/api/add`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setMovimientos(res.data);\n      } catch (err) {\n        console.error(\"Error al obtener movimientos en LeftSite:\", err);\n        setMovimientos([]);\n      }\n    };\n    fetchMovimientos();\n  }, [token, refreshKey, API_URL]); // Se refresca cuando cambia la refreshKey\n\n  // 3. El useEffect que calcula los totales se basa en su estado interno 'movimientos'\n  useEffect(() => {\n    if (movimientos && movimientos.length > 0) {\n      const ingreso = movimientos.filter(m => m.tipo === \"ingreso\").reduce((acc, cur) => acc + Number(cur.monto), 0);\n      const egreso = movimientos.filter(m => m.tipo === \"egreso\").reduce((acc, cur) => acc + Number(cur.monto), 0);\n      setTotales({\n        ingreso,\n        egreso,\n        total: ingreso - egreso\n      });\n    } else {\n      setTotales({\n        ingreso: 0,\n        egreso: 0,\n        total: 0\n      });\n    }\n  }, [movimientos]);\n\n  // ... (El resto de tu JSX se queda exactamente igual)\n\n  // ...\n}\n_s(LeftSite, \"zVQ1x1pqJMD857ZbtLFWxPqd5qQ=\");\n_c = LeftSite;\nexport default LeftSite;\nvar _c;\n$RefreshReg$(_c, \"LeftSite\");","map":{"version":3,"names":["useState","useEffect","axios","style","LeftSite","token","refreshKey","_s","isOpen","setIsOpen","movimientos","setMovimientos","totales","setTotales","ingreso","egreso","total","toggleContainer","API_URL","process","env","REACT_APP_API_URL","fetchMovimientos","res","get","headers","Authorization","data","err","console","error","length","filter","m","tipo","reduce","acc","cur","Number","monto","_c","$RefreshReg$"],"sources":["/Users/maidev/Desktop/maiWork/growth-web/frontend/src/components/LeftsSite.jsx"],"sourcesContent":["// LeftSite.js (CORREGIDO Y COMPLETO)\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport style from '../style/LeftSite.module.css';\n\n// 1. Ahora recibe 'token' y 'refreshKey' para poder buscar sus datos\nfunction LeftSite({ token, refreshKey }) {\n  const [isOpen, setIsOpen] = useState(true);\n  const [movimientos, setMovimientos] = useState([]); // Vuelve a tener su propio estado\n  const [totales, setTotales] = useState({ ingreso: 0, egreso: 0, total: 0 });\n\n  const toggleContainer = () => setIsOpen(!isOpen);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000';\n\n  // 2. Vuelve a tener su propio useEffect para buscar datos\n  useEffect(() => {\n    const fetchMovimientos = async () => {\n      if (!token) {\n        setMovimientos([]);\n        return;\n      }\n      try {\n        const res = await axios.get(`${API_URL}/api/add`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setMovimientos(res.data);\n      } catch (err) {\n        console.error(\"Error al obtener movimientos en LeftSite:\", err);\n        setMovimientos([]);\n      }\n    };\n    fetchMovimientos();\n  }, [token, refreshKey, API_URL]); // Se refresca cuando cambia la refreshKey\n\n  // 3. El useEffect que calcula los totales se basa en su estado interno 'movimientos'\n  useEffect(() => {\n    if (movimientos && movimientos.length > 0) {\n      const ingreso = movimientos.filter(m => m.tipo === \"ingreso\").reduce((acc, cur) => acc + Number(cur.monto), 0);\n      const egreso = movimientos.filter(m => m.tipo === \"egreso\").reduce((acc, cur) => acc + Number(cur.monto), 0);\n      setTotales({ ingreso, egreso, total: ingreso - egreso });\n    } else {\n      setTotales({ ingreso: 0, egreso: 0, total: 0 });\n    }\n  }, [movimientos]);\n\n  // ... (El resto de tu JSX se queda exactamente igual)\n  \n  // ...\n}\nexport default LeftSite;"],"mappings":";AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,8BAA8B;;AAEhD;AACA,SAASC,QAAQA,CAAC;EAAEC,KAAK;EAAEC;AAAW,CAAC,EAAE;EAAAC,EAAA;EACvC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACpD,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC;IAAEc,OAAO,EAAE,CAAC;IAAEC,MAAM,EAAE,CAAC;IAAEC,KAAK,EAAE;EAAE,CAAC,CAAC;EAE3E,MAAMC,eAAe,GAAGA,CAAA,KAAMR,SAAS,CAAC,CAACD,MAAM,CAAC;EAChD,MAAMU,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;EAExE;EACApB,SAAS,CAAC,MAAM;IACd,MAAMqB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI,CAACjB,KAAK,EAAE;QACVM,cAAc,CAAC,EAAE,CAAC;QAClB;MACF;MACA,IAAI;QACF,MAAMY,GAAG,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAC,GAAGN,OAAO,UAAU,EAAE;UAChDO,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUrB,KAAK;UAAG;QAC9C,CAAC,CAAC;QACFM,cAAc,CAACY,GAAG,CAACI,IAAI,CAAC;MAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,2CAA2C,EAAEF,GAAG,CAAC;QAC/DjB,cAAc,CAAC,EAAE,CAAC;MACpB;IACF,CAAC;IACDW,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACjB,KAAK,EAAEC,UAAU,EAAEY,OAAO,CAAC,CAAC,CAAC,CAAC;;EAElC;EACAjB,SAAS,CAAC,MAAM;IACd,IAAIS,WAAW,IAAIA,WAAW,CAACqB,MAAM,GAAG,CAAC,EAAE;MACzC,MAAMjB,OAAO,GAAGJ,WAAW,CAACsB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,SAAS,CAAC,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGE,MAAM,CAACD,GAAG,CAACE,KAAK,CAAC,EAAE,CAAC,CAAC;MAC9G,MAAMxB,MAAM,GAAGL,WAAW,CAACsB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,QAAQ,CAAC,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGE,MAAM,CAACD,GAAG,CAACE,KAAK,CAAC,EAAE,CAAC,CAAC;MAC5G1B,UAAU,CAAC;QAAEC,OAAO;QAAEC,MAAM;QAAEC,KAAK,EAAEF,OAAO,GAAGC;MAAO,CAAC,CAAC;IAC1D,CAAC,MAAM;MACLF,UAAU,CAAC;QAAEC,OAAO,EAAE,CAAC;QAAEC,MAAM,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAE,CAAC,CAAC;IACjD;EACF,CAAC,EAAE,CAACN,WAAW,CAAC,CAAC;;EAEjB;;EAEA;AACF;AAACH,EAAA,CA1CQH,QAAQ;AAAAoC,EAAA,GAARpC,QAAQ;AA2CjB,eAAeA,QAAQ;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}