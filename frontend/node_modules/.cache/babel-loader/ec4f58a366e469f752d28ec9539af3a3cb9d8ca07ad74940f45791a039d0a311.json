{"ast":null,"code":"var _jsxFileName = \"/Users/maidev/Desktop/maiWork/growth-web/src/components/Tareas.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport style from '../style/Tarea.module.css'; // Asegúrate de que este archivo CSS exista\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Tareas({\n  token,\n  refreshKey\n}) {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true); // 1. Estado para mostrar un mensaje de carga\n  const [error, setError] = useState(''); // Estado para mostrar errores de carga\n\n  console.log(\"Componente Tareas renderizado. Token:\", token, \"RefreshKey:\", refreshKey);\n  useEffect(() => {\n    const fetchTasks = async () => {\n      console.log(\"useEffect activado. Iniciando petición de tareas...\");\n      setLoading(true); // Empezamos a cargar\n      setError(''); // Limpiamos errores anteriores\n\n      if (!token) {\n        setTasks([]);\n        setLoading(false);\n        return;\n      }\n      try {\n        const res = await axios.get(\"http://localhost:3000/api/task\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log(\"✅ DATOS RECIBIDOS DEL BACKEND:\", res.data);\n\n        // Verificamos si la respuesta es realmente un array\n        if (Array.isArray(res.data)) {\n          setTasks(res.data);\n        } else {\n          console.error(\"Error: La respuesta del backend no es un array.\", res.data);\n          setTasks([]); // Ponemos un array vacío si los datos son incorrectos\n        }\n      } catch (err) {\n        console.error(\"Error al obtener las tareas:\", err);\n        setError(\"No se pudieron cargar las tareas. Inténtalo de nuevo.\");\n        setTasks([]);\n      } finally {\n        setLoading(false); // Terminamos de cargar, tanto si hay éxito como si hay error\n      }\n    };\n    fetchTasks();\n  }, [token, refreshKey]);\n\n  // 2. Lógica de renderizado más clara\n  const renderContent = () => {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Cargando tareas...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 14\n      }, this);\n    }\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 14\n      }, this);\n    }\n    if (tasks.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"A\\xFAn no tienes tareas. \\xA1A\\xF1ade una para comenzar!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 14\n      }, this);\n    }\n    return tasks.map(task => {\n      // Log para cada tarea que se va a renderizar\n      console.log(\"Renderizando tarea:\", task.meta, task._id);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.taskCard,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.taskHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: style.taskMeta,\n            children: task.meta\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: style.taskUrgency,\n            children: [\"Urgencia: \", task.urgencia]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.taskDetails,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Fecha: \", task.fecha ? new Date(task.fecha).toLocaleDateString() : 'Sin fecha']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Horario: \", task.horario || 'Sin horario']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, task._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Mis Tareas de hoy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.tasksList,\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n_s(Tareas, \"b2alIR17BiaocJvYMXdxyaaqbug=\");\n_c = Tareas;\nexport default Tareas;\nvar _c;\n$RefreshReg$(_c, \"Tareas\");","map":{"version":3,"names":["axios","useState","useEffect","style","jsxDEV","_jsxDEV","Tareas","token","refreshKey","_s","tasks","setTasks","loading","setLoading","error","setError","console","log","fetchTasks","res","get","headers","Authorization","data","Array","isArray","err","renderContent","children","fileName","_jsxFileName","lineNumber","columnNumber","color","length","map","task","meta","_id","className","taskCard","taskHeader","taskMeta","taskUrgency","urgencia","taskDetails","fecha","Date","toLocaleDateString","horario","container","tasksList","_c","$RefreshReg$"],"sources":["/Users/maidev/Desktop/maiWork/growth-web/src/components/Tareas.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport style from '../style/Tarea.module.css'; // Asegúrate de que este archivo CSS exista\n\nfunction Tareas({ token, refreshKey }) {\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true); // 1. Estado para mostrar un mensaje de carga\n  const [error, setError] = useState(''); // Estado para mostrar errores de carga\n\n  console.log(\"Componente Tareas renderizado. Token:\", token, \"RefreshKey:\", refreshKey);\n\n  useEffect(() => {\n    const fetchTasks = async () => {\n      console.log(\"useEffect activado. Iniciando petición de tareas...\");\n      setLoading(true); // Empezamos a cargar\n      setError(''); // Limpiamos errores anteriores\n\n      if (!token) {\n        setTasks([]);\n        setLoading(false);\n        return;\n      }\n      \n      try {\n        const res = await axios.get(\"http://localhost:3000/api/task\", {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n\n        console.log(\"✅ DATOS RECIBIDOS DEL BACKEND:\", res.data);\n\n        // Verificamos si la respuesta es realmente un array\n        if (Array.isArray(res.data)) {\n          setTasks(res.data);\n        } else {\n          console.error(\"Error: La respuesta del backend no es un array.\", res.data);\n          setTasks([]); // Ponemos un array vacío si los datos son incorrectos\n        }\n\n      } catch (err) {\n        console.error(\"Error al obtener las tareas:\", err);\n        setError(\"No se pudieron cargar las tareas. Inténtalo de nuevo.\");\n        setTasks([]);\n      } finally {\n        setLoading(false); // Terminamos de cargar, tanto si hay éxito como si hay error\n      }\n    };\n\n    fetchTasks();\n  }, [token, refreshKey]);\n\n  // 2. Lógica de renderizado más clara\n  const renderContent = () => {\n    if (loading) {\n      return <p>Cargando tareas...</p>;\n    }\n\n    if (error) {\n      return <p style={{ color: 'red' }}>{error}</p>;\n    }\n\n    if (tasks.length === 0) {\n      return <p>Aún no tienes tareas. ¡Añade una para comenzar!</p>;\n    }\n\n    return tasks.map((task) => {\n      // Log para cada tarea que se va a renderizar\n      console.log(\"Renderizando tarea:\", task.meta, task._id);\n      \n      return (\n        <div key={task._id} className={style.taskCard}>\n          <div className={style.taskHeader}>\n            <p className={style.taskMeta}>{task.meta}</p>\n            <p className={style.taskUrgency}>Urgencia: {task.urgencia}</p>\n          </div>\n          <div className={style.taskDetails}>\n            {/* 3. Renderizado de fecha más seguro */}\n            <p>Fecha: {task.fecha ? new Date(task.fecha).toLocaleDateString() : 'Sin fecha'}</p>\n            <p>Horario: {task.horario || 'Sin horario'}</p>\n          </div>\n        </div>\n      );\n    });\n  };\n\n  return (\n    <div className={style.container}>\n      <h1>Mis Tareas de hoy</h1>\n      <div className={style.tasksList}>\n        {renderContent()}\n      </div>\n    </div>\n  );\n}\n\nexport default Tareas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}