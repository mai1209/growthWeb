{"ast":null,"code":"import{useState,useEffect}from'react';import axios from'axios';import AppRoutes from'./AppRoutes';import{jsx as _jsx}from\"react/jsx-runtime\";function App(){const[token,setToken]=useState(localStorage.getItem('token'));const[activeView,setActiveView]=useState(null);const[refreshKey,setRefreshKey]=useState(0);// --- Estado para TAREAS ---\nconst[taskToEdit,setTaskToEdit]=useState(null);// --- Estado para MOVIMIENTOS ---\nconst[movementToEdit,setMovementToEdit]=useState(null);const[movimientos,setMovimientos]=useState([]);const API_URL=process.env.REACT_APP_API_URL||'http://localhost:3000';// useEffect para buscar los movimientos (para el sidebar y el dashboard)\nuseEffect(()=>{const fetchMovimientos=async()=>{if(!token){setMovimientos([]);return;}try{const res=await axios.get(`${API_URL}/api/add`,{headers:{Authorization:`Bearer ${token}`}});setMovimientos(res.data);}catch(err){console.error(\"Error al obtener movimientos en App.js:\",err);setMovimientos([]);}};fetchMovimientos();},[token,refreshKey,API_URL]);// Función unificada que refresca datos y limpia los formularios de edición\nconst handleDataUpdate=()=>{setTaskToEdit(null);// Limpia el formulario de tareas\nsetMovementToEdit(null);// Limpia el formulario de movimientos\nsetRefreshKey(prevKey=>prevKey+1);// Fuerza la actualización de datos\n};const handleAuthSuccess=newToken=>{localStorage.setItem(\"token\",newToken);setToken(newToken);setActiveView(null);};const handleLogout=()=>{localStorage.removeItem(\"token\");setToken(null);};const handleLoginClick=()=>setActiveView(\"login\");const handleCloseModal=()=>setActiveView(null);//funcion de ingreso y egreso \nconst handleAddMovement=()=>{setMovementToEdit(null);setActiveView(null);};return/*#__PURE__*/_jsx(AppRoutes,{token:token,onAuthSuccess:handleAuthSuccess,onLogout:handleLogout,onLoginClick:handleLoginClick,onCloseModal:handleCloseModal,activeView:activeView,refreshKey:refreshKey,onUpdate:handleDataUpdate,movimientos:movimientos,movementToEdit:movementToEdit,setMovementToEdit:setMovementToEdit,taskToEdit:taskToEdit,setTaskToEdit:setTaskToEdit,onAddMovement:handleAddMovement});}export default App;","map":{"version":3,"names":["useState","useEffect","axios","AppRoutes","jsx","_jsx","App","token","setToken","localStorage","getItem","activeView","setActiveView","refreshKey","setRefreshKey","taskToEdit","setTaskToEdit","movementToEdit","setMovementToEdit","movimientos","setMovimientos","API_URL","process","env","REACT_APP_API_URL","fetchMovimientos","res","get","headers","Authorization","data","err","console","error","handleDataUpdate","prevKey","handleAuthSuccess","newToken","setItem","handleLogout","removeItem","handleLoginClick","handleCloseModal","handleAddMovement","onAuthSuccess","onLogout","onLoginClick","onCloseModal","onUpdate","onAddMovement"],"sources":["/Users/maidev/Desktop/maiWork/growth-web/frontend/src/components/App.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport AppRoutes from './AppRoutes';\n\nfunction App() {\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [activeView, setActiveView] = useState(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // --- Estado para TAREAS ---\n  const [taskToEdit, setTaskToEdit] = useState(null);\n\n  // --- Estado para MOVIMIENTOS ---\n  const [movementToEdit, setMovementToEdit] = useState(null);\n  const [movimientos, setMovimientos] = useState([]);\n\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000';\n\n  // useEffect para buscar los movimientos (para el sidebar y el dashboard)\n  useEffect(() => {\n    const fetchMovimientos = async () => {\n      if (!token) {\n        setMovimientos([]);\n        return;\n      }\n      try {\n        const res = await axios.get(`${API_URL}/api/add`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setMovimientos(res.data);\n      } catch (err) {\n        console.error(\"Error al obtener movimientos en App.js:\", err);\n        setMovimientos([]);\n      }\n    };\n    fetchMovimientos();\n  }, [token, refreshKey, API_URL]);\n\n  // Función unificada que refresca datos y limpia los formularios de edición\n  const handleDataUpdate = () => {\n    setTaskToEdit(null);      // Limpia el formulario de tareas\n    setMovementToEdit(null);  // Limpia el formulario de movimientos\n    setRefreshKey(prevKey => prevKey + 1); // Fuerza la actualización de datos\n  };\n\n  const handleAuthSuccess = (newToken) => {\n    localStorage.setItem(\"token\", newToken);\n    setToken(newToken);\n    setActiveView(null);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setToken(null);\n  };\n  \n  const handleLoginClick = () => setActiveView(\"login\");\n  const handleCloseModal = () => setActiveView(null);\n\n//funcion de ingreso y egreso \nconst handleAddMovement = () => {\n  setMovementToEdit(null);\n  setActiveView(null);\n};\n\n\n\n\n  return (\n \n      <AppRoutes\n        token={token}\n        onAuthSuccess={handleAuthSuccess}\n        onLogout={handleLogout}\n        onLoginClick={handleLoginClick}\n        onCloseModal={handleCloseModal}\n        activeView={activeView}\n        \n        refreshKey={refreshKey}\n        onUpdate={handleDataUpdate}\n        \n        movimientos={movimientos}\n        movementToEdit={movementToEdit}\n        setMovementToEdit={setMovementToEdit}\n        \n        taskToEdit={taskToEdit}\n        setTaskToEdit={setTaskToEdit}\n\n          onAddMovement={handleAddMovement}\n      />\n  \n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}