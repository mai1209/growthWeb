{"ast":null,"code":"var _jsxFileName = \"/Users/maidev/Desktop/maiWork/growth-web/src/components/App.jsx\",\n  _s = $RefreshSig$();\n// src/App.js\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport AppRoutes from \"./AppRoutes\"; // El nuevo componente que manejará las rutas\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n  const [activeView, setActiveView] = useState(null); // Para el modal de login\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [movimientos, setMovimientos] = useState([]);\n  useEffect(() => {\n    const fetchMovimientos = async () => {\n      if (!token) {\n        setMovimientos([]);\n        return;\n      }\n      try {\n        const res = await axios.get(\"http://localhost:3000/api/add\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setMovimientos(res.data);\n      } catch (err) {\n        console.error(\"Error al obtener movimientos:\", err);\n        setMovimientos([]);\n      }\n    };\n    fetchMovimientos();\n  }, [token, refreshKey]);\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setToken(null);\n  };\n  const handleMovementAdded = () => setRefreshKey(prevKey => prevKey + 1);\n  const handleAuthSuccess = newToken => {\n    localStorage.setItem(\"token\", newToken);\n    setToken(newToken);\n    setActiveView(null);\n  };\n  const handleLoginClick = () => setActiveView(\"login\");\n  const handleCloseModal = () => setActiveView(null);\n\n  // App ahora solo renderiza el componente de rutas y le pasa todo lo que necesita.\n  return /*#__PURE__*/_jsxDEV(AppRoutes, {\n    token: token,\n    onAuthSuccess: handleAuthSuccess,\n    onLoginClick: handleLoginClick,\n    onCloseModal: handleCloseModal,\n    activeView: activeView,\n    onMovementAdded: handleMovementAdded,\n    onLogout: handleLogout,\n    movimientos: movimientos,\n    refreshKey: refreshKey\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"y6OOamQpMn096NzMGNC67Y/81jM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","axios","AppRoutes","jsxDEV","_jsxDEV","App","_s","token","setToken","localStorage","getItem","activeView","setActiveView","refreshKey","setRefreshKey","movimientos","setMovimientos","fetchMovimientos","res","get","headers","Authorization","data","err","console","error","handleLogout","removeItem","handleMovementAdded","prevKey","handleAuthSuccess","newToken","setItem","handleLoginClick","handleCloseModal","onAuthSuccess","onLoginClick","onCloseModal","onMovementAdded","onLogout","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/maidev/Desktop/maiWork/growth-web/src/components/App.jsx"],"sourcesContent":["// src/App.js\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport AppRoutes from \"./AppRoutes\"; // El nuevo componente que manejará las rutas\n\nfunction App() {\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n  const [activeView, setActiveView] = useState(null); // Para el modal de login\n  const [refreshKey, setRefreshKey] = useState(0);\n  const [movimientos, setMovimientos] = useState([]);\n\n  useEffect(() => {\n    const fetchMovimientos = async () => {\n      if (!token) {\n        setMovimientos([]);\n        return;\n      }\n      try {\n        const res = await axios.get(\"http://localhost:3000/api/add\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setMovimientos(res.data);\n      } catch (err) {\n        console.error(\"Error al obtener movimientos:\", err);\n        setMovimientos([]);\n      }\n    };\n    fetchMovimientos();\n  }, [token, refreshKey]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setToken(null);\n  };\n  const handleMovementAdded = () => setRefreshKey((prevKey) => prevKey + 1);\n  const handleAuthSuccess = (newToken) => {\n    localStorage.setItem(\"token\", newToken);\n    setToken(newToken);\n    setActiveView(null);\n  };\n  const handleLoginClick = () => setActiveView(\"login\");\n  const handleCloseModal = () => setActiveView(null);\n\n  // App ahora solo renderiza el componente de rutas y le pasa todo lo que necesita.\n  return (\n    <AppRoutes\n      token={token}\n      onAuthSuccess={handleAuthSuccess}\n      onLoginClick={handleLoginClick}\n      onCloseModal={handleCloseModal}\n      activeView={activeView}\n      onMovementAdded={handleMovementAdded}\n      onLogout={handleLogout}\n      movimientos={movimientos}\n      refreshKey={refreshKey}\n    />\n  );\n}\n\nexport default App;"],"mappings":";;AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,aAAa,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAErC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAACU,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;EACjE,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACpD,MAAM,CAACc,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAElDC,SAAS,CAAC,MAAM;IACd,MAAMiB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI,CAACV,KAAK,EAAE;QACVS,cAAc,CAAC,EAAE,CAAC;QAClB;MACF;MACA,IAAI;QACF,MAAME,GAAG,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,+BAA+B,EAAE;UAC3DC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUd,KAAK;UAAG;QAC9C,CAAC,CAAC;QACFS,cAAc,CAACE,GAAG,CAACI,IAAI,CAAC;MAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEF,GAAG,CAAC;QACnDP,cAAc,CAAC,EAAE,CAAC;MACpB;IACF,CAAC;IACDC,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACV,KAAK,EAAEM,UAAU,CAAC,CAAC;EAEvB,MAAMa,YAAY,GAAGA,CAAA,KAAM;IACzBjB,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;IAChCnB,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC;EACD,MAAMoB,mBAAmB,GAAGA,CAAA,KAAMd,aAAa,CAAEe,OAAO,IAAKA,OAAO,GAAG,CAAC,CAAC;EACzE,MAAMC,iBAAiB,GAAIC,QAAQ,IAAK;IACtCtB,YAAY,CAACuB,OAAO,CAAC,OAAO,EAAED,QAAQ,CAAC;IACvCvB,QAAQ,CAACuB,QAAQ,CAAC;IAClBnB,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EACD,MAAMqB,gBAAgB,GAAGA,CAAA,KAAMrB,aAAa,CAAC,OAAO,CAAC;EACrD,MAAMsB,gBAAgB,GAAGA,CAAA,KAAMtB,aAAa,CAAC,IAAI,CAAC;;EAElD;EACA,oBACER,OAAA,CAACF,SAAS;IACRK,KAAK,EAAEA,KAAM;IACb4B,aAAa,EAAEL,iBAAkB;IACjCM,YAAY,EAAEH,gBAAiB;IAC/BI,YAAY,EAAEH,gBAAiB;IAC/BvB,UAAU,EAAEA,UAAW;IACvB2B,eAAe,EAAEV,mBAAoB;IACrCW,QAAQ,EAAEb,YAAa;IACvBX,WAAW,EAAEA,WAAY;IACzBF,UAAU,EAAEA;EAAW;IAAA2B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACxB,CAAC;AAEN;AAACrC,EAAA,CApDQD,GAAG;AAAAuC,EAAA,GAAHvC,GAAG;AAsDZ,eAAeA,GAAG;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}